<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Waste Tracker: Medical Waste Blockchain</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32'><rect width='32' height='32' fill='%23000000'/><path d='M16 26c5.5-5.5 6.5-15 0-18-6.5 3-5.5 12.5 0 18Z' fill='%232563eb' stroke='%2310b981' stroke-width='1.5' stroke-linecap='round'/><path d='M16 26c-1.2-3.2-2.8-7.8-2.8-9.5' stroke='%2310b981' stroke-width='1.3' stroke-linecap='round'/><circle cx='16' cy='16' r='12' fill='none' stroke='%232563eb' stroke-width='1.2'/></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
</head>
<body>
  <!-- Geometric Background -->
  <div class="geometric-bg">
    <div class="bg-shape shape-1"></div>
    <div class="bg-shape shape-2"></div>
    <div class="bg-shape shape-3"></div>
    <div class="bg-shape shape-4"></div>
    <div class="bg-shape shape-5"></div>
    <div class="bg-shape shape-6"></div>
    <div class="gradient-overlay"></div>
  </div>

  <div class="container">
    <header class="page-header">
      <div class="header-icon">
        <div class="logo-container">
          <svg width="52" height="52" viewBox="0 0 52 52" fill="none">
            <rect width="52" height="52" rx="16" fill="url(#logoGradient)"/>
            <path d="M26 38c7-7 8-20 0-24-8 4-7 17 0 24Z" fill="#ffffff" stroke="#10b981" stroke-width="1.8" stroke-linecap="round"/>
            <path d="M26 38c-1.8-4.5-3.5-10.5-3.5-12.5" stroke="#10b981" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="26" cy="26" r="20" fill="none" stroke="#ffffff" stroke-width="1.2" opacity="0.3"/>
            <defs>
              <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#2563eb;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#1e40af;stop-opacity:1" />
              </linearGradient>
            </defs>
          </svg>
          <div class="logo-glow"></div>
        </div>
      </div>
      <div class="header-content">
        <h1 class="header-title">Smart Waste Tracker</h1>
        <p class="header-subtitle">Medical Waste Blockchain Platform</p>
      </div>
    </header>

    <div class="welcome-card">
      <div class="welcome-icon">
        <svg width="44" height="44" viewBox="0 0 44 44" fill="none">
          <circle cx="22" cy="22" r="20" fill="url(#welcomeGradient)" opacity="0.2"/>
          <path d="M22 32c5.5-5.5 6.5-15 0-18-6.5 3-5.5 12.5 0 18Z" fill="#10b981" stroke="#2563eb" stroke-width="1.5"/>
          <circle cx="22" cy="22" r="18" fill="none" stroke="#10b981" stroke-width="1" opacity="0.3"/>
          <defs>
            <linearGradient id="welcomeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
            </linearGradient>
          </defs>
        </svg>
      </div>
      <div class="welcome-content">
        <h3 class="welcome-title">Thank you for your contribution!</h3>
        <p class="welcome-text">
          <span class="highlight-blue">Every record</span> ensures safer, cleaner healthcare waste management.
          <br><span class="highlight-green">üåø You are building a trusted, sustainable future.</span>
        </p>
      </div>
    </div>

    <main class="dashboard-main">
      <!-- Form Section -->
      <section class="form-section">
        <div class="form-card">
          <div class="form-header">
            <h2>Log Medical Waste Event</h2>
            <div class="form-decoration"></div>
          </div>
          
          <form class="waste-form">
            <div class="form-group">
              <label for="binId">Bin ID</label>
              <div class="input-group">
                <input id="binId" type="number" min="1" placeholder="Enter bin ID or scan QR" />
                <button type="button" id="scanBtn" class="scan-btn">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                    <path d="m9 9 5 5-5 5"/>
                  </svg>
                  Scan QR
                </button>
              </div>
              <div id="qr-reader" class="qr-reader hide"></div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="eventType">Event Type</label>
                <select id="eventType">
                  <option value="Sealed">Sealed</option>
                  <option value="PickedUp">Picked Up</option>
                  <option value="Disposed">Disposed</option>
                  <option value="Incinerated">Incinerated</option>
                </select>
              </div>
              <div class="form-group">
                <label for="wasteType">Waste Type</label>
                <select id="wasteType">
                  <option value="Dry">Dry</option>
                  <option value="Wet">Wet</option>
                  <option value="Infectious">Infectious</option>
                  <option value="Pathological">Pathological</option>
                  <option value="Sharps">Sharps</option>
                  <option value="Chemical">Chemical</option>
                  <option value="Pharmaceutical">Pharmaceutical</option>
                  <option value="Radioactive">Radioactive</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="staffId">Staff Name/ID</label>
                <input id="staffId" type="text" placeholder="Enter your name or ID" autocomplete="off" />
              </div>
              <div class="form-group">
                <label for="weight">Weight (kg)</label>
                <input id="weight" type="number" step="0.01" min="0" placeholder="e.g. 2.5" />
              </div>
            </div>

            <button type="button" id="logBtn" class="primary-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                <path d="m2 17 10 5 10-5"/>
                <path d="m2 12 10 5 10-5"/>
              </svg>
              Add to Blockchain
            </button>

            <div id="status" class="status-message"></div>

            <div class="action-buttons">
              <button type="button" onclick="exportCSV()" class="secondary-btn">Export CSV</button>
              <button type="button" onclick="validateChain()" class="secondary-btn">Validate Chain</button>
            </div>
            
            <div id="chainStatus" class="chain-status"></div>
          </form>
        </div>
      </section>

      <!-- Charts Section -->
      <section class="charts-section">
        <div class="chart-card">
          <div class="chart-header">
            <h3>Waste Type Distribution</h3>
            <div class="chart-decoration"></div>
          </div>
          <div class="chart-container">
            <canvas id="wasteTypeBar"></canvas>
          </div>
        </div>

        <div class="chart-card">
          <div class="chart-header">
            <h3>Event Type Overview</h3>
            <div class="chart-decoration"></div>
          </div>
          <div class="chart-container">
            <canvas id="eventTypePie"></canvas>
          </div>
        </div>

        <div class="chart-card timeline-card">
          <div class="chart-header">
            <h3>Event Activity Timeline</h3>
            <div class="chart-decoration"></div>
          </div>
          <div class="chart-container">
            <canvas id="summaryLineChart"></canvas>
          </div>
        </div>
      </section>
    </main>

    <!-- Impact Widget -->
    <section class="impact-section">
      <div class="impact-card">
        <div class="impact-icon">
          <svg width="56" height="56" viewBox="0 0 56 56" fill="none">
            <circle cx="28" cy="28" r="26" fill="url(#impactGradient)" opacity="0.1"/>
            <path d="M28 14c7 0 14 7 14 14s-7 14-14 14-14-7-14-14 7-14 14-14z" fill="none" stroke="#10b981" stroke-width="2"/>
            <path d="M34 32c-3 6-10 8-13 5s1-8 5-10" stroke="#2563eb" stroke-width="2" stroke-linecap="round"/>
            <circle cx="28" cy="28" r="20" fill="none" stroke="#10b981" stroke-width="1" opacity="0.3"/>
            <defs>
              <linearGradient id="impactGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="impact-content">
          <h3 class="impact-title">Sustainability Impact</h3>
          <div class="impact-stats">
            <span id="impact-waste">0</span> kg hazardous waste properly managed
          </div>
          <div class="impact-details">
            <span id="impact-bins">0</span> bins tracked ¬∑ <span id="impact-events">0</span> total events
            <br><span class="impact-message">Thank you for protecting our planet! üåç</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Blockchain Table -->
    <section class="table-section">
      <div class="table-card">
        <div class="table-header">
          <h3>Blockchain Transaction Log</h3>
          <div class="table-decoration"></div>
        </div>
        <div class="table-container">
          <table id="chainTable">
            <thead>
              <tr>
                <th>#</th>
                <th>Timestamp</th>
                <th>Bin ID</th>
                <th>Event Type</th>
                <th>Waste Type</th>
                <th>Weight (kg)</th>
                <th>Staff</th>
                <th>MetaMask Address</th>
                <th>QR Certificate</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>